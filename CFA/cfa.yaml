pp:
  &pp {
    type: http,
    interval: 86400,
    health-check: { enable: true, url: "http://1.0.0.1/generate_204", interval: 3600 },
  }
rpc: &rpc { type: http, behavior: classical, interval: 86400 }

# > Filter
filter_common: &filter_common "^(?=.*(?:é¦™æ¸¯|HK|Hong Kong|ðŸ‡­ðŸ‡°|å°æ¹¾|TW|Taiwan|ðŸ‡¨ðŸ‡³|æ—¥æœ¬|JP|Japan|ðŸ‡¯ðŸ‡µ|æ–°åŠ å¡|ç‹®åŸŽ|SG|Singapore|ðŸ‡¸ðŸ‡¬|ç¾Žå›½|US|USA|United States|ðŸ‡ºðŸ‡¸))(?!.*(?:Game)).*$"
filter_cold: &filter_cold "^(?!.*(?:HK|Hong Kong|TW|Taiwan|JP|Japan|ðŸ‡¯ðŸ‡µ|SG|Singapore|US|USA|United States|é¦™æ¸¯|å°æ¹¾|æ—¥æœ¬|æ–°åŠ å¡|ç‹®åŸŽ|ç¾Žå›½|ç¾¤ç»„|å¥—é¤åˆ°æœŸ|å‰©ä½™æµé‡|åº”æ€¥ç»­è´¹|é‡ç½®|Emby)).*$"
filter_hk: &filter_hk "^(?=.*(?:é¦™æ¸¯|HK|Hong Kong))(?!.*(?:Game)).*$"
filter_tw: &filter_tw "^(?=.*(?:å°æ¹¾|TW|Taiwan))(?!.*(?:Game)).*$"
filter_jp: &filter_jp "^(?=.*(?:æ—¥æœ¬|JP|Japan|ðŸ‡¯ðŸ‡µ))(?!.*(?:Game)).*$"
filter_sg: &filter_sg "^(?=.*(?:æ–°åŠ å¡|ç‹®åŸŽ|SG|Singapore))(?!.*(?:Game)).*$"
filter_us: &filter_us "^(?=.*(?:ç¾Žå›½|US|USA|United States))(?!.*(?:Game|Emby)).*$"
# > Proxies
proxies_airport: &proxies_airport [ðŸ”± Atomlantis, â“‚ï¸ Maying, ðŸ§¬ SYN, ðŸ§Š ACA, ðŸ¥¶ å†·é—¨åœ°åŒº]
proxies_mode: &proxies_mode [DIRECT, â˜ï¸ PROXY, ðŸ¥¶ å†·é—¨åœ°åŒº]
proxies_area: &proxies_area [ðŸ‡­ðŸ‡° Hong Kong, ðŸ‡¨ðŸ‡³ Taiwan, ðŸ‡¯ðŸ‡µ Japan, ðŸ‡¸ðŸ‡¬ Singapore, ðŸ‡ºðŸ‡¸ United States]

# > General
mode: Rule
log-level: info
external-controller: 0.0.0.0:9090

proxy-providers:
  p_mix:
    <<: *pp
    path: ./proxys/p_mix.yaml
    url: "aaaaaa.aaa"

proxy-groups:
  - { name: â˜ï¸ PROXY, type: select, proxies: *proxies_airport }
  - { name: ðŸŽ¥ Netflix, type: select, use: [p_mix], proxies: [ðŸ¥¶ å†·é—¨åœ°åŒº], filter: *filter_sg }
  - { name: ðŸŽžï¸ Emby, type: select, use: [p_mix], proxies: [DIRECT], filter: '^(?=.*\bSYN\b)(?=.*\b0\.01\b).+$' }
  - { name: ðŸª£ å›½å¤–ç½‘ç›˜, type: select, proxies: *proxies_airport }
  - { name: ðŸ¤– AI, type: select, use: [p_mix], filter: *filter_us }
  - { name: ðŸ•¹ï¸ Steam, type: select, proxies: *proxies_mode }
  - { name: ðŸŽ Apple, type: select, proxies: *proxies_mode }
  - { name: ðŸ§© Microsoft, type: select, proxies: *proxies_mode }
  - { name: ðŸŽµ Spotify, type: select, proxies: *proxies_mode }
  - { name: ðŸŒŒ Google, type: select, proxies: *proxies_mode }
  - { name: ðŸ“² Telegram, type: select, proxies: *proxies_airport }
  - { name: â™¥ï¸ EHGallery, type: select, proxies: *proxies_airport }
  - { name: ðŸŽ¶ Tiktok, type: select, proxies: *proxies_area }
  - { name: ðŸª™ Crypto, type: select, proxies: *proxies_area }
  - { name: âœ–ï¸ Twitter, type: select, proxies: *proxies_area }

  - { name: ðŸ”± Atomlantis, type: select, use: [p_mix], filter: "Atomlantis" }
  - { name: â“‚ï¸ Maying, type: select, use: [p_mix], filter: "Maying" }
  - { name: ðŸ§¬ SYN, type: select, use: [p_mix], filter: "SYN" }
  - { name: ðŸ§Š ACA, type: select, use: [p_mix], filter: "ACA" }

  - { name: ðŸ“º Bilibili, type: select, proxies: [DIRECT, ðŸ§¿ FINAL, ðŸ¥¶ å†·é—¨åœ°åŒº] }
  - { name: ðŸ‡­ðŸ‡° Hong Kong, type: select, use: [p_mix], filter: *filter_hk }
  - { name: ðŸ‡¨ðŸ‡³ Taiwan, type: select, use: [p_mix], filter: *filter_tw }
  - { name: ðŸ‡¯ðŸ‡µ Japan, type: select, use: [p_mix], filter: *filter_jp }
  - { name: ðŸ‡¸ðŸ‡¬ Singapore, type: select, use: [p_mix], filter: *filter_sg }
  - { name: ðŸ‡ºðŸ‡¸ United States, type: select, use: [p_mix], filter: *filter_us }
  - { name: ðŸ¥¶ å†·é—¨åœ°åŒº, type: select, use: [p_mix], filter: *filter_cold }
  - { name: ðŸ§¿ FINAL, type: select, proxies: *proxies_mode }
  - { name: ðŸŽ« SYN Stream, type: select, use: [p_mix], filter: '^(?=.*\bSYN\b)(?=.*\bSP\b).*$' }
rule-providers:
  #Youtube
  Blackmatrix7_YouTube:
    <<: *rpc
    path: ./rules/Blackmatrix7_YouTube.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/YouTube/YouTube.yaml"

  Blackmatrix7_YouTubeMusic:
    <<: *rpc
    path: ./rules/Blackmatrix7_YouTubeMusic.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/YouTubeMusic/YouTubeMusic.yaml"
  # Spotify
  Blackmatrix7_Spotify:
    <<: *rpc
    path: ./rules/Blackmatrix7_Spotify.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Spotify/Spotify.yaml"
  # Netflix
  Blackmatrix7_Netflix:
    <<: *rpc
    path: ./rules/Blackmatrix7_Netflix.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Netflix/Netflix_Classical.yaml"

  #TikTok
  Blackmatrix7_Tiktok:
    <<: *rpc
    path: ./rules/Blackmatrix7_Tiktok.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/TikTok/TikTok.yaml"

  #Telegram
  Blackmatrix7_Telegram:
    <<: *rpc
    path: ./rules/Blackmatrix7_Telegram.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Telegram/Telegram.yaml"

  #OpenAI
  Blackmatrix7_OpenAi:
    <<: *rpc
    path: ./rules/Blackmatrix7_OpenAi.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/OpenAI/OpenAI.yaml"

  #Claude
  Blackmatrix7_Claude:
    <<: *rpc
    path: ./rules/Blackmatrix7_Claude.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Claude/Claude.yaml"

  #Apple
  Blackmatrix7_Apple:
    <<: *rpc
    path: ./rules/Blackmatrix7_Apple.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Apple/Apple_Classical.yaml"

  #Google
  Blackmatrix7_Google:
    <<: *rpc
    path: ./rules/Blackmatrix7_Google.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Google/Google.yaml"

  #Microsoft
  Blackmatrix7_Microsoft:
    <<: *rpc
    path: ./rules/Blackmatrix7_Microsoft.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Microsoft/Microsoft.yaml"

  #PikPak
  Blackmatrix7_PikPak:
    <<: *rpc
    path: ./rules/Blackmatrix7_PikPak.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/PikPak/PikPak.yaml"
  #MEGA
  Blackmatrix7_MEGA:
    <<: *rpc
    path: ./rules/Blackmatrix7_MEGA.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/MEGA/MEGA.yaml"

  #EHGallery
  Blackmatrix7_EHGallery:
    <<: *rpc
    path: ./rules/Blackmatrix7_EHGallery.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/EHGallery/EHGallery.yaml"

  #Steam
  Blackmatrix7_Steam:
    <<: *rpc
    path: ./rules/Blackmatrix7_Steam.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Steam/Steam.yaml"
  #Crypto
  Blackmatrix7_Crypto:
    <<: *rpc
    path: ./rules/Blackmatrix7_Crypto.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Crypto/Crypto.yaml"
  #Twitter
  Blackmatrix7_Twitter:
    <<: *rpc
    path: ./rules/Blackmatrix7_Twitter.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Twitter/Twitter.yaml"

  #æ‹’ç»
  Blackmatrix7_BlockHttpDNS:
    <<: *rpc
    path: ./rules/Blackmatrix7_BlockHttpDNS.yaml
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/BlockHttpDNS/BlockHttpDNS.yaml

  #ä»£ç†
  Blackmatrix7_Global:
    #åŒ…å« Loyalsoldier çš„ gfw / greatfire / proxy
    <<: *rpc
    path: ./rules/Blackmatrix7_Global.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Global/Global_Classical.yaml"

  #ç›´è¿ž
  Blackmatrix7_Bilibili:
    <<: *rpc
    path: ./rules/Blackmatrix7_Bilibili.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/BiliBili/BiliBili.yaml"

  Blackmatrix7_WeChat:
    <<: *rpc
    path: ./rules/Blackmatrix7_WeChat.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/WeChat/WeChat.yaml"

  Blackmatrix7_Direct:
    #ç›´è¿žæŒ‡ä¸åº”è¯¥è¢«åŽ»å¹¿å‘Šåˆ†æµè§„åˆ™å±è”½çš„åŸŸåã€IPç­‰ï¼Œè¯·å°†æ­¤åˆ†æµè§„åˆ™ç½®äºŽåŽ»å¹¿å‘Šè§„åˆ™ä¹‹å‰ã€‚
    <<: *rpc
    path: ./rules/Blackmatrix7_Direct.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Direct/Direct.yaml"

  Blackmatrix7_Lan:
    # åŒ…å« Loyalsoldier çš„ private / lancidr
    <<: *rpc
    path: ./rules/Blackmatrix7_Lan.yaml
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Lan/Lan.yaml"
  #åŒ…å« Loyalsoldier çš„ direct / cncidr
  # Blackmatrix7_ChinaMax:
  #   <<: *rpc
  #   path: ./rules/Blackmatrix7_ChinaMax.yaml
  #   url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/ChinaMax/ChinaMax_Classical_No_IPv6_No_Resolve.yaml"
  Me_Emby:
    <<: *rpc
    path: ./rules/Me_Emby.yaml
    url: "https://cdn.jsdelivr.net/gh/Gurosuogen/Ruleset@master/Providers/Emby.yaml"
  Me_Nikke:
    <<: *rpc
    path: ./rules/Me_Nikke.yaml
    url: "https://cdn.jsdelivr.net/gh/Gurosuogen/Ruleset@master/Providers/Nikke.yaml"
rules:
  - RULE-SET,Blackmatrix7_BlockHttpDNS,REJECT
  - RULE-SET,Blackmatrix7_Bilibili,ðŸ“º Bilibili
  - RULE-SET,Blackmatrix7_WeChat,DIRECT
  - RULE-SET,Blackmatrix7_Direct,DIRECT
  - RULE-SET,Blackmatrix7_Lan,DIRECT
  #EMBY
  - RULE-SET,Me_Emby,ðŸŽžï¸ Emby
  - DOMAIN-SUFFIX,stream.synn.cc,ðŸŽ« SYN Stream
  #Nikke
  - RULE-SET,Me_Nikke,ðŸ‡¯ðŸ‡µ Japan
  #æ¼«ç”»æŸœ
  - DOMAIN-SUFFIX,manhuagui.com,ðŸ‡¨ðŸ‡³ Taiwan
  - DOMAIN-SUFFIX,mhgui.com,ðŸ‡¨ðŸ‡³ Taiwan
  - DOMAIN-SUFFIX,hamreus.com,ðŸ‡¨ðŸ‡³ Taiwan
  #å›½å¤–æœåŠ¡
  - RULE-SET,Blackmatrix7_EHGallery,â™¥ï¸ EHGallery
  - RULE-SET,Blackmatrix7_PikPak,ðŸª£ å›½å¤–ç½‘ç›˜
  - RULE-SET,Blackmatrix7_MEGA,ðŸª£ å›½å¤–ç½‘ç›˜
  - RULE-SET,Blackmatrix7_Telegram,ðŸ“² Telegram
  - RULE-SET,Blackmatrix7_OpenAi,ðŸ¤– AI
  - RULE-SET,Blackmatrix7_Claude,ðŸ¤– AI
  - DOMAIN,bard.google.com,ðŸ¤– AI
  - RULE-SET,Blackmatrix7_Tiktok,ðŸŽ¶ Tiktok
  - RULE-SET,Blackmatrix7_Apple,ðŸŽ Apple
  - RULE-SET,Blackmatrix7_Microsoft,ðŸ§© Microsoft
  - RULE-SET,Blackmatrix7_Google,ðŸŒŒ Google
  - RULE-SET,Blackmatrix7_YouTube,ðŸŒŒ Google
  - RULE-SET,Blackmatrix7_YouTubeMusic,ðŸŒŒ Google
  - RULE-SET,Blackmatrix7_Spotify,ðŸŽµ Spotify
  - RULE-SET,Blackmatrix7_Netflix,ðŸŽ¥ Netflix
  - RULE-SET,Blackmatrix7_Steam,ðŸ•¹ï¸ Steam
  - RULE-SET,Blackmatrix7_Crypto,ðŸª™ Crypto
  - RULE-SET,Blackmatrix7_Twitter,âœ–ï¸ Twitter
  #ä»£ç†
  - RULE-SET,Blackmatrix7_Global,â˜ï¸ PROXY
  # ç›´è¿ž
  # - RULE-SET,Blackmatrix7_ChinaMax,DIRECT
  - GEOIP,LAN,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,ðŸ§¿ FINAL
